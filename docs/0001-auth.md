# Authentication SPEC

- **REQ-AUTH-01 (Đăng ký)**: Người dùng có thể đăng ký tài khoản mới với tên đăng nhập (duy nhất) và mật khẩu.
- **REQ-AUTH-02 (Đăng nhập)**: Người dùng đăng nhập vào hệ thống để truy cập các chức năng.
- **REQ-AUTH-03 (Đăng xuất)**: Người dùng có thể đăng xuất khỏi hệ thống an toàn, giải phóng kết nối.
- **REQ-AUTH-04 (Tái kết nối)**: Hệ thống hỗ trợ cơ chế tự động kết nối lại (Rejoin) nếu mất kết nối mạng tạm thời.

## UI:

- Cần có thanh Status Bar (giống status bar trên vscode) ở tất cả các màn hình để hiển thị trạng thái kết nối, tên đăng nhập, server. có nút logout/disconnect

- Màn hình đăng nhập và đăng ký cần có ô để nhập ip/domain port của server

## Logic

Khi đăng nhập, client tạo kết nối TCP đến server, gửi gói tin JSON đăng nhập (MSG_TYPE: REQ), server kiểm tra thông tin, nếu đúng thì gửi gói tin phản hồi thành công (MSG_TYPE: RES).

Nếu tài khoản đã đăng nhập ở nơi khác, server sẽ gửi thông báo lỗi (MSG_TYPE: ERR) tới phiên cũ với nội dung "Logged in from another location" hoặc tương tự, sau đó đóng kết nối phiên cũ.

Sau khi đăng nhập thành công, server và client cần gửi các gói tin Heartbeat (MSG_TYPE: HBT) để đảm bảo kết nối vẫn còn hiệu lực (Keep-alive).

Khi đăng xuất, client gửi gói tin đăng xuất, server nhận gói tin và giải phóng kết nối TCP.


